<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"                   
                template="#{themeManager.layoutTemplate}">

    <ui:param name="dontShowContentHeader" value="true" />
    <ui:param name="showContextMenu" value="false" />

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="id" value="#{rafController.rafCode}" />
            <f:viewParam name="o" value="#{rafController.objectId}" />
            <f:viewAction action="#{rafController.init()}"/>
        </f:metadata>
    </ui:define>


    <ui:define name="extraHead">
        <h:outputStylesheet library="raf" name="css/raf.css" />
    </ui:define>

    <ui:define name="customHeader">


        <ui:remove>
            <section class="content-header">
                <i class="fa fa-3x  fa-archive pull-left" />
                <div class="pull-right">
                    <ul class="breadcrumb text-muted text-sm" style="background: transparent;">
                        <li><i class="fa fa-sitemap"/></li>
                        <li><a href="/dolap/raf/private/abc">Klasör 1</a></li>
                        <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                        <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                        <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                        <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                        <li>Klasör 2.5</li>
                    </ul>
                </div>


                <h1><div class="text-muted"><small>Raf</small></div> Kişisel</h1> 
            </section>
        </ui:remove>

        <div class="raf-header-container">
            <section class="raf-header">
                <div class="raf-header-logo">
                    <i class="fa fa-3x  fa-archive" style="line-height: 1 !important;"/>
                </div>
                <div class="raf-header-texts">
                    <div class="raf-header-text text-muted text-sm">
                        Raf
                    </div>
                    <div class="raf-header-info text-bold text-big">
                        #{rafController.rafDefinition.name}
                    </div>
                </div>
            </section>
            <section class="raf-header-tools">
                <ui:remove>
                    <div class="raf-header-tool-pack">
                        <ul class="breadcrumb text-muted text-sm" style="background: transparent; padding: 0px; margin: 0px;">
                            <li><i class="fa fa-sitemap"/></li>
                            <li><a href="/dolap/raf/private/abc">Klasör 1</a></li>
                            <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                            <ui:remove>
                                <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                                <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                                <li><a href="/dolap/raf/private/abc/def">Klasör 2</a></li>
                            </ui:remove>
                            <li>Klasör 2.5</li>
                        </ul>
                    </div>
                </ui:remove>
                <div class="raf-header-tool-pack">
                    <div class="raf-header-btns">
                        <ui:remove>
                            <p:commandLink action="#{rafController.toggleSideBar()}" update="raf-view">
                                <i class="fa fa-sitemap" />
                            </p:commandLink>

                            <p:commandLink action="#{rafController.createFolder()}" update="raf-view">
                                <i class="fa fa-plus" />
                            </p:commandLink>

                            <p:commandLink action="#{rafDefinitionDialogController.openDialog()}" update="raf-view">
                                <i class="fa fa-plus" />
                            </p:commandLink>
                        </ui:remove>

                        <p:commandLink action="#{rafDefinitionDialogController.openDialog()}" >
                            <i class="fa fa-plus" />
                        </p:commandLink>
                    </div>
                    <div class="raf-header-btns">
                        <ui:remove>
                            <p:commandLink action="#{rafController.setContentView('iconView')}" update="raf-view">
                                <i class="fa fa-th" />
                            </p:commandLink>

                            <p:commandLink action="#{rafController.setContentView('simpleRowView')}" update="raf-view">
                                <i class="fa fa-list" />
                            </p:commandLink>

                            <p:commandLink action="#{rafController.setContentView('detailRowView')}" update="raf-view">
                                <i class="fa fa-th-list" />
                            </p:commandLink>
                        </ui:remove>
                    </div>
                    <div class="raf-header-btns">
                        <a href="" >
                            <i class="fa fa-sitemap" />
                        </a>
                        <a href="" >
                            <i class="fa fa-list" />
                        </a>
                    </div>
                    <div class="raf-header-btns">
                        <div class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-cog"></i>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <ui:repeat value="#{rafNavigationController.rafs}" var="raf" >
                                    <li >
                                        <h:link  outcome="/raf.xhtml" title="#{raf.code}">
                                            <i class="fa fa-archive"></i>
                                            <f:param name="id" value="#{raf.code}" />
                                            #{raf.name}
                                        </h:link>
                                    </li>
                                </ui:repeat>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </div>

    </ui:define>

    <ui:define name="body">
        <ui:include src="/layout/messages.xhtml" />


        <p:outputPanel id="raf-view" class="raf">
            <div class="raf-box left" >
                <div class="raf-box-header">
                    <i class="fa #{rafController.selectedSidePanel.icon}"/>
                    #{rafController.selectedSidePanel.title}

                    <div class="pull-right">

                        <ui:repeat value="#{rafController.sidePanels}" var="sidePanel">
                            <p:commandLink action="#{rafController.setSelectedSidePanel(sidePanel)}" title="#{sidePanel.title}" update="raf-view">
                                <i class="fa #{sidePanel.icon}" /> 
                            </p:commandLink>
                        </ui:repeat>
                    </div>
                </div>
                <div class="raf-box-content" style="">
                    <ui:include src="#{rafController.selectedSidePanel.viewId}" />
                </div>
            </div>

            <p:outputPanel id="raf-view-content" class="raf-box middle">
                <div class="raf-box-header">
                    <i class="fa #{rafController.selectedContentPanel.icon}"/>
                    #{rafController.selectedContentPanel.title}

                    <div class="pull-right">

                        <p:commandLink action="#{createFolderAction.execute()}" process="@this" update="raf-view-content" >
                            <i class="fa fa-plus" />
                            <p:ajax event="dialogReturn" update="raf-view" />
                        </p:commandLink>

                        <p:commandLink action="#{fileUploadAction.execute()}" process="@this" update="raf-view-content" >
                            <i class="fa fa-upload" />
                            <p:ajax event="dialogReturn" update="raf-view" />
                        </p:commandLink>


                        <ui:remove>
                            TODO: Sistemden otomatik olabilecek view tiplerini almak genişleme için olanak sağlar ama şimdilik kapatıyoruz. Diğer sunum tipleri ( icon, table, galery v.b. sonra eklenebilir. )
                            <ui:repeat value="#{rafController.contentPanels}" var="cw" >
                                <p:commandLink action="#{rafController.setSelectedContentPanel(cw)}" process="@this" update="raf-view-content" title="#{cw.actionTitle}">
                                    <i class="fa #{cw.actionIcon}" />
                                </p:commandLink>
                            </ui:repeat>
                        </ui:remove>

                        <div class="dropdown" style="display: inline-block;">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-cog"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                <li><a href="#">Show Folder</a></li>
                                <li><a href="#">Show Breadcrumb</a></li>
                                <li role="separator" class="divider"></li>
                                <ui:repeat value="#{rafController.collectionContentPanels}" var="cw" >
                                    <li class="#{rafController.getSelectedContentPanel() eq cw ? 'active' : ''}">
                                        <p:commandLink action="#{rafController.setSelectedContentPanel(cw)}" process="@this" update="raf-view-content" title="#{cw.actionTitle}">
                                            <i class="fa #{cw.actionIcon}" /> #{cw.actionTitle}
                                        </p:commandLink>
                                    </li>
                                </ui:repeat>
                                <li role="separator" class="divider"></li>
                            </ul>
                        </div>

                    </div>


                </div>
                <div class="raf-box-content" >
                    <ui:include src="#{rafController.selectedContentPanel.viewId}" />
                </div>
                <ui:fragment rendered="#{rafController.selectedContentPanel.supportPaging}">
                    <div class="raf-box-footer" style="text-align: center">
                        <ul class="pagination pagination-sm" style="margin: 0px; display: inline;">
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li><a href="#">6</a></li>
                            <li><a href="#">7</a></li>
                        </ul>
                    </div>
                </ui:fragment>
            </p:outputPanel>
        </p:outputPanel>





    </ui:define>


</ui:composition>