<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:xlink="http://www.w3.org/1999/xlink">

    <ui:fragment rendered="#{viewBean.supportBreadcrumb}" >
        <ui:include src="/fragments/breadcrumb.xhtml" >
            <ui:param name="forCollection" value="true" />
        </ui:include>
    </ui:fragment>

    <div class="raf-container" style="overflow-y: auto; overflow-x: auto;">
        <table class="table table-striped"  >
            <tbody style="font-size: 12px;">
                <tr>
                    <th></th>
                    <th></th>
                    <th>Başlık</th>
                    <th>Dosya</th>
                    <th>Kullanıcı</th>
                    <th>Tarih</th>
                    <th>Açıklama</th>
                    <th>Kategori</th>
                    <th></th>
                </tr>
                <p:repeat value="#{viewBean.collection.items}" var="item" >
                    <tr>
                        <td style="width: 16px; text-align: center; ">
                            <p:commandLink action="#{rafSelectionController.toggle(item)}" update="raf-view-content" ajax="true" process="@this" styleClass="btn btn-box-tool" style="margin-right: 4px;">
                                <i class="fa #{rafSelectionController.isSelected(item) ? 'fa-check-square' : 'fa-square-o'}" />
                            </p:commandLink>
                        </td>
                        <td style="width: 16px; text-align: center;">
                            <svg class="icon" >
                                <use xlink:href="#{resource['icons:mimetypes.svg']}##{iconResolver.getIcon(item.mimeType)}" />
                            </svg>
                        </td>
                        <td>
                            <p:commandLink action="#{rafController.selectItem(item)}" update="raf-view" ajax="true" process="@this" styleClass="text-sm">
                                <span class="text-sm">#{item.title}</span> 
                            </p:commandLink>
                        </td>
                        <td>
                            #{item.name}
                        </td>
                        <td>
                            #{userLookup.getUserName(item.createBy)}
                        </td>
                        <td>
                            <t:cellOutputDateTime value="#{item.createDate}"/>
                        </td>
                        <td>
                            #{item.info}
                        </td>
                        <td>
                            #{item.category}
                        </td>
                        <td style="text-align: right; vertical-align: middle">
                            <ui:fragment rendered="#{item.mimeType ne 'raf/folder'}">
                                <h:form id="ff" style="display: inline;">
                                    <p:commandLink action="#{downloadAction.downloadFile(item)}" update="raf-view" ajax="false" process="@this" styleClass="btn btn-box-tool">
                                        <i class="fa fa-download" />
                                    </p:commandLink>
                                </h:form>
                                <p:commandLink action="#{rafController.selectItem(item)}" update="raf-view" ajax="true" process="@this" styleClass="btn btn-box-tool">
                                    <i class="fa fa-edit" />
                                </p:commandLink>
                                <p:commandLink action="#{deleteAction.deleteObject(item)}" process="@this" ajax="true" update="raf-view" title="#{deleteAction.title}" styleClass="btn btn-box-tool">
                                    <i class="fa fa-trash" />
                                    <p:confirm header="#{messages['confirmation.header.DeleteAction']}" message="#{messages['confirmation.message.DeleteAction']}" icon="fa fa-alert" />
                                </p:commandLink>
                            </ui:fragment>

                            <ui:fragment rendered="#{item.mimeType eq 'raf/folder'}">
                                <p:commandLink action="#{rafController.selectFolderItem(item)}" update="raf-view" ajax="true" process="@this" styleClass="btn btn-box-tool">
                                    <i class="fa fa-edit" />
                                </p:commandLink>

                                <p:commandLink action="#{deleteAction.deleteObject(item)}" process="@this" ajax="true" update="raf-view" title="#{deleteAction.title}" styleClass="btn btn-box-tool">
                                    <i class="fa fa-trash" />
                                    <p:confirm header="#{messages['confirmation.header.DeleteAction']}" message="#{messages['confirmation.message.DeleteAction']}" icon="fa fa-alert" />
                                </p:commandLink>
                            </ui:fragment>
                        </td>
                    </tr>
                </p:repeat>
            </tbody>
        </table>
    </div>
</ui:composition>

