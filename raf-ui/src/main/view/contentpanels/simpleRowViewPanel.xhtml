<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:fragment rendered="#{simpleRowViewPanel.supportBreadcrumb}" >
        <ui:include src="/fragments/breadcrumb.xhtml" />
    </ui:fragment>

    <ul class="raf-item-row-list">

        <ui:repeat value="#{simpleRowViewPanel.collection.items}" var="item" >
            <li class="raf-item">
                <div class="raf-item-content">
                    <i class="fa fa-check-square-o" style="margin-right: 4px;"/>
                    <span class="raf-item-image">
                        <i class="fa #{iconResolver.getIcon(item.mimeType)} fa-2x" />
                    </span>
                    <div class="raf-item-name">
                        <p:commandLink action="#{rafController.selectItem(item)}" update="raf-view" ajax="true" process="@this" styleClass="text-sm">
                            <span class="text-sm">#{item.title}</span>
                        </p:commandLink>
                        <span class="text-muted text-sm">
                            #{item.info} <ui:remove>| #{userLookup.getUserName(item.createBy)} | <t:cellOutputDateTime value="#{item.createDate}"/></ui:remove>
                        </span>
                    </div>
                </div>

                <div class="raf-item-tools">
                    <ui:remove>FIXME: Yetki kontrol√º</ui:remove>

                    <ui:fragment rendered="#{item.mimeType ne 'raf/folder'}">
                        <h:form id="ff" style="display: inline;">
                            <p:commandLink action="#{downloadAction.downloadFile(item)}" update="raf-view" ajax="false" process="@this" styleClass="btn btn-box-tool">
                                <i class="fa fa-download" />
                            </p:commandLink>
                        </h:form>
                        <p:commandLink action="#{rafController.selectItem(item)}" update="raf-view" ajax="true" process="@this" styleClass="btn btn-box-tool">
                            <i class="fa fa-edit" />
                        </p:commandLink>
                        <p:commandLink action="#{deleteAction.deleteObject(item)}" process="@this" ajax="true" update="raf-view" title="#{deleteAction.title}" styleClass="btn btn-box-tool">
                            <i class="fa fa-trash" />
                            <p:confirm header="#{messages['confirmation.header.DeleteAction']}" message="#{messages['confirmation.message.DeleteAction']}" icon="fa fa-alert" />
                        </p:commandLink>
                    </ui:fragment>

                    <ui:fragment rendered="#{item.mimeType eq 'raf/folder'}">
                        <p:commandLink action="#{rafController.selectFolderItem(item)}" update="raf-view" ajax="true" process="@this" styleClass="btn btn-box-tool">
                            <i class="fa fa-edit" />
                        </p:commandLink>

                        <p:commandLink action="#{deleteAction.deleteObject(item)}" process="@this" ajax="true" update="raf-view" title="#{deleteAction.title}" styleClass="btn btn-box-tool">
                            <i class="fa fa-trash" />
                            <p:confirm header="#{messages['confirmation.header.DeleteAction']}" message="#{messages['confirmation.message.DeleteAction']}" icon="fa fa-alert" />
                        </p:commandLink>
                    </ui:fragment>
                </div>
            </li>
        </ui:repeat>
    </ul>
</ui:composition>

